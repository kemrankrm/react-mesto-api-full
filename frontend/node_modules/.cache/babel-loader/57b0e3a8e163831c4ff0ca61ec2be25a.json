{"ast":null,"code":"var _jsxFileName = \"/Users/kemrankarimov/Desktop/mesto-react/src/components/App.jsx\",\n    _s = $RefreshSig$();\n\nimport Header from './Header.jsx';\nimport Main from './Main.jsx';\nimport Footer from './Footer.jsx';\nimport ImagePopup from './ImagePopup.jsx';\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport { api } from '../utils/utils.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport EditProfilePopup from './EditProfilePopup.jsx';\nimport EditAvatarPopup from './EditAvatarPopup.jsx';\nimport AddPlacePopup from './AddPlacePopup.jsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [currentUser, setCurrentUser] = useState(null); //CARDS SETUP\n\n  const [cards, setCards] = useState([]);\n  const [cardData, setCardData] = useState({\n    name: '',\n    link: ''\n  });\n  const [selectedCard, setSelectedCard] = useState({\n    isOpen: false,\n    src: '',\n    title: ''\n  });\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvaterPopupOpen, setIsEditAvaterPopupOpen] = useState(false);\n  useEffect(() => {\n    api.getUserData().then(res => setCurrentUser(res)).catch(err => console.log(err));\n    api.getInitialCards().then(res => setCards(res)).catch(err => console.log(err));\n  }, []); //Card Removing Fucntion\n\n  const handleCardDelete = card => {\n    api.removeCard(card._id).then(res => {\n      setCards(cards.filter(item => {\n        return item._id !== card._id;\n      }));\n      console.log(res);\n    }).catch(err => console.log(err));\n  }; //Card Liking/Disliking Function\n\n\n  const handleCardLike = card => {\n    const isLiked = card.likes.some(item => item._id === currentUser._id);\n    (!isLiked ? api.putLike(card._id) : api.removeLike(card._id)).then(res => {\n      setCards(cards.map(item => {\n        return item._id === card._id ? res : item;\n      }));\n    });\n  }; //Card Addition Function\n\n\n  const handleAddPlaceSubmit = cardData => {\n    // console.log(cardData);\n    api.postNewCard(cardData).then(res => {\n      setCards([res, ...cards]);\n      closeAllPopups();\n      setCardData({\n        name: '',\n        link: ''\n      });\n    }).catch(err => console.log(err));\n  };\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvaterPopupOpen(true);\n  };\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  const handleCardClick = (src, name) => {\n    setSelectedCard({\n      isOpen: true,\n      src: src,\n      title: name\n    });\n  };\n\n  const closeAllPopups = () => {\n    setIsEditAvaterPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard({\n      isOpen: false,\n      src: '',\n      alt: ''\n    });\n  };\n\n  const handleEditProfileFormSubmit = data => {\n    api.postUserInfo(data).then(res => {\n      setCurrentUser(res);\n      closeAllPopups();\n    });\n  };\n\n  const handleEditAvatarSubmit = (data, inputRef) => {\n    api.upploadAvatar(data).then(res => {\n      setCurrentUser(res);\n      closeAllPopups();\n      inputRef.current.value = '';\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page\",\n    children: /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n      value: currentUser,\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Main, {\n        onEditProfile: handleEditProfileClick,\n        onAddPlace: handleAddPlaceClick,\n        onEditAvater: handleEditAvatarClick,\n        onCardClick: handleCardClick,\n        cards: cards,\n        onCardDelete: handleCardDelete,\n        onCardLike: handleCardLike\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(EditProfilePopup, {\n        isOpen: isEditProfilePopupOpen,\n        onClose: closeAllPopups,\n        onSubmit: handleEditProfileFormSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n        isOpen: isEditAvaterPopupOpen,\n        onClose: closeAllPopups,\n        onUploadAvatar: handleEditAvatarSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n        isOpen: isAddPlacePopupOpen,\n        onClose: closeAllPopups,\n        onAddPlace: handleAddPlaceSubmit,\n        cardData: cardData,\n        onSetCardData: setCardData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n        card: selectedCard,\n        onClose: closeAllPopups\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 9\n  }, this);\n}\n\n_s(App, \"/Fv8DmM6bkWBasbiM0/mhnWcBeY=\");\n\n_c = App;\n;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["Header","Main","Footer","ImagePopup","useState","useEffect","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","currentUser","setCurrentUser","cards","setCards","cardData","setCardData","name","link","selectedCard","setSelectedCard","isOpen","src","title","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvaterPopupOpen","setIsEditAvaterPopupOpen","getUserData","then","res","catch","err","console","log","getInitialCards","handleCardDelete","card","removeCard","_id","filter","item","handleCardLike","isLiked","likes","some","putLike","removeLike","map","handleAddPlaceSubmit","postNewCard","closeAllPopups","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardClick","alt","handleEditProfileFormSubmit","data","postUserInfo","handleEditAvatarSubmit","inputRef","upploadAvatar","current","value"],"sources":["/Users/kemrankarimov/Desktop/mesto-react/src/components/App.jsx"],"sourcesContent":["import Header from './Header.jsx';\nimport Main from './Main.jsx';\nimport Footer from './Footer.jsx';\nimport ImagePopup from './ImagePopup.jsx';\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport { api } from '../utils/utils.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport EditProfilePopup from './EditProfilePopup.jsx';\nimport EditAvatarPopup from './EditAvatarPopup.jsx';\nimport AddPlacePopup from './AddPlacePopup.jsx';\n\nfunction App() {\n    const [currentUser, setCurrentUser] = useState(null);\n\n    //CARDS SETUP\n    const [cards, setCards] = useState([]);\n    const [cardData, setCardData] = useState({\n        name: '',\n        link: ''\n    })\n\n    const [selectedCard, setSelectedCard] = useState({ isOpen: false, src: '', title: '' });\n\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState( false );\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState ( false );\n    const [isEditAvaterPopupOpen, setIsEditAvaterPopupOpen] = useState( false );\n\n    useEffect(() => {\n        api.getUserData()\n            .then(res => setCurrentUser(res))\n            .catch(err => console.log(err));\n\n            \n        api.getInitialCards()\n            .then((res) => setCards(res))\n            .catch((err) => console.log(err));\n    }, [])\n\n    //Card Removing Fucntion\n    const handleCardDelete = (card) => {\n        api.removeCard(card._id)\n            .then((res) => {\n                setCards(cards.filter(item => {return item._id !== card._id}))\n                console.log(res);\n            })\n            .catch(err => console.log(err));\n    }\n\n    //Card Liking/Disliking Function\n    const handleCardLike = (card) => {\n        const isLiked = card.likes.some(item => item._id === currentUser._id);\n        (!isLiked ? api.putLike(card._id) : api.removeLike(card._id))\n            .then((res) => {\n                setCards(cards.map(item => {\n                    return (item._id === card._id ? res : item)\n                }))\n            })\n    }\n\n    //Card Addition Function\n    const handleAddPlaceSubmit = (cardData) => {\n        // console.log(cardData);\n        api.postNewCard(cardData)\n            .then(res => {\n                setCards([res, ...cards]);\n                closeAllPopups();\n                setCardData({name: '', link: ''})\n            })\n            .catch(err => console.log(err));\n    }\n\n    const handleEditAvatarClick = () => {\n        setIsEditAvaterPopupOpen( true );\n    }\n\n    const handleEditProfileClick = () => {\n        setIsEditProfilePopupOpen( true );\n    }\n\n    const handleAddPlaceClick = () => {\n        setIsAddPlacePopupOpen( true );\n    }\n\n    const handleCardClick = (src, name) => {\n        setSelectedCard({ isOpen: true, src: src, title: name });\n    }\n\n    const closeAllPopups = () => {\n        setIsEditAvaterPopupOpen(false);\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n\n        setSelectedCard({isOpen: false, src: '', alt: ''})\n    }\n\n    const handleEditProfileFormSubmit = (data) => {\n        api.postUserInfo(data)\n            .then(res => {\n                setCurrentUser(res);\n                closeAllPopups();\n            });\n    }\n\n    const handleEditAvatarSubmit = (data, inputRef) => {\n        api.upploadAvatar(data)\n            .then(res => {\n                setCurrentUser(res);\n                closeAllPopups()\n                inputRef.current.value = '';\n            })\n    }\n\n    return (\n        <div className=\"page\">\n            <CurrentUserContext.Provider value={currentUser}>\n                <Header />\n                <Main \n                    onEditProfile={handleEditProfileClick} \n                    onAddPlace={handleAddPlaceClick} \n                    onEditAvater={handleEditAvatarClick} \n                    onCardClick={handleCardClick}\n                    cards={cards}\n                    onCardDelete={handleCardDelete}\n                    onCardLike={handleCardLike}/>\n                <Footer />\n\n                <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onSubmit={handleEditProfileFormSubmit} />\n                <EditAvatarPopup isOpen={isEditAvaterPopupOpen} onClose={closeAllPopups} onUploadAvatar={handleEditAvatarSubmit} />                \n                <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} cardData={cardData} onSetCardData={setCardData}/>\n                <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n            </CurrentUserContext.Provider>   \n        </div>\n  )};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}