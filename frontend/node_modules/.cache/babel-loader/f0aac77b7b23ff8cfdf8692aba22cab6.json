{"ast":null,"code":"var _jsxFileName = \"/Users/kemrankarimov/Desktop/react-mesto-auth/src/components/AuthForm.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport auth from \"../auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AuthForm(props) {\n  _s();\n\n  let buttonText = props.buttonText;\n  const [userData, setUserData] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const history = useHistory();\n\n  const handleChange = e => {\n    if (e.target.name === \"email\") {\n      setUserData({\n        [e.target.name]: e.target.value,\n        password: userData.password\n      });\n    } else {\n      setUserData({\n        email: userData.email,\n        [e.target.name]: e.target.value\n      });\n    }\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (props.isRegistration) {\n      buttonText = 'Идет регистрация...';\n      auth(userData, \"signup\").then(res => {\n        if (res) {\n          props.onAuthStatus('success');\n          history.push('/sign-in');\n        } else {\n          props.onAuthStatus('fail');\n        }\n\n        props.onTooltipOpen(true);\n        buttonText = 'Зарегистрироваться';\n      }).catch(e => console.log(e));\n    } else {\n      auth(userData, \"signin\").then(res => {\n        if (res.token) {\n          localStorage.setItem(\"jwt\", res.token);\n          props.onLoggedin(true);\n          props.onCurrentEmail(userData.email);\n          history.push(\"/main\");\n        } else {\n          props.onAuthStatus(\"fail\");\n          props.onTooltipOpen(true);\n        }\n      }).catch(e => console.log(e));\n    }\n  }; //   const handleSubmit = (e) => {\n  //     e.preventDefault();\n  //     if (props.isRegistration) {\n  //       auth(userData, \"signup\").then((res) => {\n  //         if (res.status === 201) {\n  //           props.onAuthStatus(\"success\");\n  //           history.push(\"/sign-in\");\n  //         } else {\n  //           props.onAuthStatus(\"fail\");\n  //         }\n  //         props.onTooltipOpen(true);\n  //         console.log(\"res\", res.status);\n  //       });\n  //     } else {\n  //       auth(userData, \"signin\")\n  //         .then((res) => {\n  //             if (res.token) {\n  //                 localStorage.setItem(\"jwt\", res.token);\n  //                 props.onLoggedin(true);\n  //                 props.onCurrentEmail(userData.email);\n  //                 history.push(\"/main\");\n  //               } else {\n  //                 props.onAuthStatus(\"fail\");\n  //                 props.onTooltipOpen(true);\n  //               }        \n  //         })\n  //         .catch((e) => e);\n  //     }\n  //   };\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"authentification\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"authentification__form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"fieldset\", {\n        className: \"authentification__input-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n          className: \"authentification__legend\",\n          children: props.legend\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"email\",\n          value: userData.email,\n          onChange: handleChange,\n          className: \"authentification__email\",\n          type: \"email\",\n          placeholder: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"password\",\n          value: userData.password,\n          onChange: handleChange,\n          className: \"authentification__password\",\n          type: \"password\",\n          placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"authentification__button\",\n          type: \"submit\",\n          value: ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), props.isRegistration && /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/sign-in\",\n        className: \"authentification__text\",\n        children: \"\\u0423\\u0436\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B? \\u0412\\u043E\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AuthForm, \"/vMzhCwJv8LK5q88aMJTQf0oLOA=\", false, function () {\n  return [useHistory];\n});\n\n_c = AuthForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthForm\");","map":{"version":3,"names":["useState","Link","useHistory","auth","AuthForm","props","buttonText","userData","setUserData","email","password","history","handleChange","e","target","name","value","handleSubmit","preventDefault","isRegistration","then","res","onAuthStatus","push","onTooltipOpen","catch","console","log","token","localStorage","setItem","onLoggedin","onCurrentEmail","legend"],"sources":["/Users/kemrankarimov/Desktop/react-mesto-auth/src/components/AuthForm.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport auth from \"../auth\";\n\nexport default function AuthForm(props) {\n    let buttonText = props.buttonText;\n    \n  const [userData, setUserData] = useState({ email: \"\", password: \"\" });\n  const history = useHistory();\n  const handleChange = (e) => {\n    if (e.target.name === \"email\") {\n      setUserData({\n        [e.target.name]: e.target.value,\n        password: userData.password,\n      });\n    } else {\n      setUserData({\n        email: userData.email,\n        [e.target.name]: e.target.value,\n      });\n    }\n  };\n\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (props.isRegistration) {\n        buttonText = 'Идет регистрация...'\n      auth(userData, \"signup\").then((res) => {\n        if(res){\n            props.onAuthStatus('success')\n            history.push('/sign-in')\n        } else {\n            props.onAuthStatus('fail')\n        }\n        props.onTooltipOpen(true);\n        buttonText = 'Зарегистрироваться'\n      })\n      .catch(e => console.log(e));\n    } else {\n      auth(userData, \"signin\")\n        .then((res) => {\n            if (res.token) {\n                localStorage.setItem(\"jwt\", res.token);\n                props.onLoggedin(true);\n                props.onCurrentEmail(userData.email);\n                history.push(\"/main\");\n              } else {\n                props.onAuthStatus(\"fail\");\n                props.onTooltipOpen(true);\n              }        \n        })\n        .catch((e) => console.log(e));\n    }\n  };\n\n//   const handleSubmit = (e) => {\n//     e.preventDefault();\n//     if (props.isRegistration) {\n//       auth(userData, \"signup\").then((res) => {\n//         if (res.status === 201) {\n//           props.onAuthStatus(\"success\");\n//           history.push(\"/sign-in\");\n//         } else {\n//           props.onAuthStatus(\"fail\");\n//         }\n//         props.onTooltipOpen(true);\n//         console.log(\"res\", res.status);\n//       });\n//     } else {\n//       auth(userData, \"signin\")\n//         .then((res) => {\n//             if (res.token) {\n//                 localStorage.setItem(\"jwt\", res.token);\n//                 props.onLoggedin(true);\n//                 props.onCurrentEmail(userData.email);\n//                 history.push(\"/main\");\n//               } else {\n//                 props.onAuthStatus(\"fail\");\n//                 props.onTooltipOpen(true);\n//               }        \n//         })\n//         .catch((e) => e);\n//     }\n//   };\n\n  return (\n    <div className=\"authentification\">\n      <form className=\"authentification__form\" onSubmit={handleSubmit}>\n        <fieldset className=\"authentification__input-container\">\n          <legend className=\"authentification__legend\">{props.legend}</legend>\n          <input\n            name=\"email\"\n            value={userData.email}\n            onChange={handleChange}\n            className=\"authentification__email\"\n            type=\"email\"\n            placeholder=\"Email\"\n          />\n          <input\n            name=\"password\"\n            value={userData.password}\n            onChange={handleChange}\n            className=\"authentification__password\"\n            type=\"password\"\n            placeholder=\"Пароль\"\n          />\n          <button className=\"authentification__button\" type=\"submit\" value={''}>\n            \n          </button>\n        </fieldset>\n        {props.isRegistration && (\n          <Link to=\"/sign-in\" className=\"authentification__text\">\n            Уже зарегистрированы? Войти\n          </Link>\n        )}\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}